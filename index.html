<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Online - Seu Portf√≥lio</title>
    <style>
        /* Estilos CSS b√°sicos para a p√°gina */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5;
            color: #333;
            text-align: center;
            /* Isso √© para que a p√°gina tenha algum scroll, para testar o position: fixed */
            height: 150vh;
            display: block; /* Mudei para block para permitir scroll */
        }

        .main-content {
            background-color: #fff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: 50px auto; /* Centraliza o conte√∫do principal */
            text-align: left;
        }

        h1 {
            color: #007bff;
            margin-bottom: 20px;
        }

        p {
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* --- Estilos para o bal√£o do chat --- */
        #chat-bubble-container {
            position: fixed; /* Fixa o elemento na tela */
            bottom: 20px; /* Dist√¢ncia do fundo */
            right: 20px;  /* Dist√¢ncia da direita */
            width: 350px; /* Largura do bal√£o do chat */
            height: 450px; /* Altura do bal√£o do chat */
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            overflow: hidden; /* Garante que o chat dentro n√£o transborde */
            z-index: 1000; /* Garante que o chat fique acima de outros elementos */
            display: none; /* Come√ßa escondido */
            flex-direction: column;
        }

        #chat-toggle-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #007bff;
            color: white;
            border-radius: 50%; /* Faz um c√≠rculo */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1001; /* Fica acima do cont√™iner do chat */
            border: none;
            outline: none;
        }

        #chat-header {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #chat-header button {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .chat-content {
            flex-grow: 1; /* Permite que o conte√∫do do chat ocupe o espa√ßo restante */
        }

        /* Estilos responsivos para o bal√£o */
        @media (max-width: 768px) {
            #chat-bubble-container {
                width: 90vw; /* Ocupa 90% da largura da tela */
                height: 70vh; /* Ocupa 70% da altura da tela */
                bottom: 10px;
                right: 5vw; /* 5% de margem em cada lado */
                left: 5vw;
            }
            #chat-toggle-button {
                bottom: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <h1>Conte√∫do Principal da Sua P√°gina</h1>
        <p>Aqui voc√™ pode colocar qualquer informa√ß√£o que queira que seus visitantes vejam, como sobre seu portf√≥lio, servi√ßos, etc.</p>
        <p>Role a p√°gina para baixo para ver o bot√£o do chat no canto inferior direito.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>

    <button id="chat-toggle-button">üí¨</button>

    <div id="chat-bubble-container">
        <div id="chat-header">
            <span>Conversar conosco</span>
            <button id="close-chat-button">X</button>
        </div>
        <div id="chat-actual-content" class="chat-content">
            </div>
    </div>

    <script type="module">
        import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

        // Inicializa o chat no cont√™iner 'chat-actual-content' dentro do bal√£o
        createChat({
            webhookUrl: 'https://troll-popular-guinea.ngrok-free.app/webhook/webhook-chat',
            initialMessages: [
                'Seja bem-vindo ao meu portf√≥lio! Como posso ajudar?'
            ],
            target: '#chat-actual-content' // O ID do div onde o chat ser√° injetado
        });

        // L√≥gica para abrir e fechar o bal√£o do chat
        const chatToggleButton = document.getElementById('chat-toggle-button');
        const chatBubbleContainer = document.getElementById('chat-bubble-container');
        const closeChatButton = document.getElementById('close-chat-button');

        chatToggleButton.addEventListener('click', () => {
            if (chatBubbleContainer.style.display === 'flex') {
                chatBubbleContainer.style.display = 'none';
            } else {
                chatBubbleContainer.style.display = 'flex';
            }
        });

        closeChatButton.addEventListener('click', () => {
            chatBubbleContainer.style.display = 'none';
        });
    </script>
</body>
</html>
